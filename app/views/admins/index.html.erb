<div class="container my-4">
  <%= stylesheet_link_tag 'admin_index', media:"all" %>
  <h2>Order List</h2>
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Order ID</th>
          <th scope="col">Order Date</th>
          <th scope="col">Total Amount</th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td><%= order.id %></td>

            <td><%= order.created_at.strftime("%Y-%m-%d") %></td>
            <td><%= number_to_currency(order.total_price,unit:"â‚¹", format: '%u%n', delimiter: ',', precision: 2) %></td>
            <td>
              <% if order.status=="Partial" %>
              <span class="badge">
              <%= "#{order.line_items.count { |line_item| line_item.status == 'Dispatched' }} / #{order.line_items.count} Confirmed" %>
              </span>
              <% else %>
              <span class="badge">
              <%= order.status.capitalize %>
                            </span>
              <% end %>
            </td>

          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="pagination-container">
  <%= paginate @orders %>
</div>
  </div>
</div>
